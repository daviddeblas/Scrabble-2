<svg [attr.viewBox]="'0 0 ' + (boardSize + 1) * 50 + ' ' + (boardSize + 1) * 50" xmlns="http://www.w3.org/2000/svg" class="board">
    <defs>
        <!-- Effet 3D : https://stackoverflow.com/questions/60344788/svg-light-and-shadow-a-3d-feelling -->
        <filter id="3d-effect">
            <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur1" />
            <feSpecularLighting result="specOut" in="blur1" specularConstant="0.5" specularExponent="12" lighting-color="#fff">
                <feDistantLight azimuth="225" elevation="45" />
            </feSpecularLighting>
            <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0" />
        </filter>

        <!-- Pattern pour la grille du fond -->
        <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
            <rect filter="url(#3d-effect)" width="50" height="50" fill="#c4bda1" />
        </pattern>

        <clipPath id="cell-clip">
            <rect x="0" y="0" width="50" height="50" />
        </clipPath>
    </defs>

    <!-- Grille du fond-->
    <rect x="50" y="50" [attr.width]="boardSize * 50" [attr.height]="boardSize * 50" fill="url(#grid)" />

    <!-- CoordonÃ©es -->
    <text [attr.x]="75 + i * 50" y="25" class="coordinate-text" *ngFor="let number of numberSequence(boardSize); let i = index">
        {{ number }}
    </text>
    <text x="25" [attr.y]="75 + i * 50" class="coordinate-text" *ngFor="let number of letterSequence(boardSize); let i = index">
        {{ number }}
    </text>

    <g transform="translate(50, 50)">
        <!--<g app-cell-word-x2 [pos]="{ x: 1, y: 1 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 2, y: 2 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 3, y: 3 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 4, y: 4 }"></g>

        <g app-cell-word-x2 [pos]="{ x: 13, y: 1 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 12, y: 2 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 11, y: 3 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 10, y: 4 }"></g>

        <g app-cell-word-x2 [pos]="{ x: 1, y: 13 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 2, y: 12 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 3, y: 11 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 4, y: 10 }"></g>

        <g app-cell-word-x2 [pos]="{ x: 13, y: 13 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 12, y: 12 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 11, y: 11 }"></g>
        <g app-cell-word-x2 [pos]="{ x: 10, y: 10 }"></g>

        <g app-cell-word-x3 [pos]="{ x: 0, y: 0 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 7, y: 0 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 14, y: 0 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 0, y: 7 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 14, y: 7 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 0, y: 14 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 7, y: 14 }"></g>
        <g app-cell-word-x3 [pos]="{ x: 14, y: 14 }"></g>

        <g app-cell-letter-x2 [pos]="{ x: 3, y: 0 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 11, y: 0 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 6, y: 2 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 8, y: 2 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 7, y: 3 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 0, y: 3 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 14, y: 3 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 2, y: 6 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 6, y: 6 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 8, y: 6 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 12, y: 6 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 3, y: 7 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 11, y: 7 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 2, y: 8 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 6, y: 8 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 8, y: 8 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 12, y: 8 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 6, y: 6 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 0, y: 11 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 7, y: 11 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 14, y: 11 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 6, y: 12 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 8, y: 12 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 3, y: 14 }"></g>
        <g app-cell-letter-x2 [pos]="{ x: 11, y: 14 }"></g>

        <g app-cell-letter-x3 [pos]="{ x: 5, y: 1 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 9, y: 1 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 1, y: 5 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 5, y: 5 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 9, y: 5 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 13, y: 5 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 1, y: 9 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 5, y: 9 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 9, y: 9 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 13, y: 9 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 5, y: 13 }"></g>
        <g app-cell-letter-x3 [pos]="{ x: 9, y: 13 }"></g>

        <g app-cell-star [pos]="{ x: 7, y: 7 }"></g>-->

        <!--<g *ngFor="let multipliersColumn of (boardState$ | async)?.multipliers; let i = index">
            <g *ngFor="let multiplier of multipliersColumn; let j = index" app-cell-letter-x3 [pos]="{ x: i, y: j }"></g>
        </g>-->

        <g *ngFor="let letterArray of board$ | async; let i = index">
            <g
                *ngFor="let letter of letterArray; let j = index"
                app-letter
                [letter]="letter"
                [pos]="{ x: i, y: j }"
                [value]="(pointsPerLetter$ | async)?.get(letter)"
            ></g>
        </g>
    </g>
</svg>
